<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DROP SHOP | –ö–æ—Ä–∑–∏–Ω–∞</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root {
    --primary-black: #0a0a0a;
    --primary-white: #ffffff;
    --accent-gold: #FFD700;
    --accent-silver: #C0C0C0;
    --accent-red: #FF3B30;
    --bg-light: #f8f9fa;
    --bg-dark: #1a1a1a;
    --text-light: #666666;
    --success-green: #27ae60;
    --info-blue: #3498db;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background-color: var(--primary-white);
    color: var(--primary-black);
    line-height: 1.6;
    padding-top: 80px;
  }

  /* Header (–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π index.html) */
  .main-header {
    background: var(--primary-black);
    padding: 1rem 2rem;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .header-container {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
  }

  .logo-icon {
    font-size: 2.2rem;
    color: var(--accent-gold);
  }

  .logo-text {
    font-family: 'Helvetica Neue', sans-serif;
    font-weight: 900;
    font-size: 1.8rem;
    color: var(--primary-white);
    letter-spacing: -0.5px;
  }

  .logo-subtitle {
    font-size: 0.7rem;
    color: var(--accent-silver);
    margin-top: -5px;
    letter-spacing: 1.5px;
  }

  /* Cart Container */
  .cart-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
  }

  .cart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 2px solid var(--bg-light);
  }

  .cart-title {
    font-size: 2.5rem;
    font-weight: 800;
  }

  .cart-stats {
    color: var(--text-light);
    font-size: 0.9rem;
  }

  .cart-content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 2rem;
  }

  @media (max-width: 992px) {
    .cart-content {
      grid-template-columns: 1fr;
    }
  }

  /* Cart Items */
  .cart-items {
    background: var(--bg-light);
    border-radius: 15px;
    padding: 2rem;
  }

  .cart-empty {
    text-align: center;
    padding: 4rem 2rem;
  }

  .empty-icon {
    font-size: 4rem;
    color: var(--text-light);
    margin-bottom: 1.5rem;
  }

  .empty-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }

  .empty-text {
    color: var(--text-light);
    margin-bottom: 2rem;
  }

  .cart-item {
    display: grid;
    grid-template-columns: 120px 1fr auto;
    gap: 1.5rem;
    padding: 1.5rem;
    background: white;
    border-radius: 12px;
    margin-bottom: 1rem;
    border: 1px solid rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
  }

  .cart-item:hover {
    border-color: var(--accent-gold);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }

  .item-image {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 8px;
  }

  .item-info {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .item-header {
    margin-bottom: 1rem;
  }

  .item-category {
    font-size: 0.8rem;
    color: var(--text-light);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.3rem;
  }

  .item-name {
    font-weight: 600;
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    line-height: 1.4;
  }

  .item-type {
    display: inline-block;
    padding: 0.2rem 0.8rem;
    border-radius: 15px;
    font-size: 0.75rem;
    font-weight: 700;
    margin-right: 0.5rem;
  }

  .type-original {
    background: linear-gradient(135deg, var(--accent-gold), #FFA500);
    color: var(--primary-black);
  }

  .type-replica {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
  }

  .item-details {
    color: var(--text-light);
    font-size: 0.9rem;
  }

  .item-actions {
    display: flex;
    gap: 1rem;
    align-items: center;
    margin-top: 1rem;
  }

  .quantity-control {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: var(--bg-light);
    border-radius: 8px;
    padding: 0.3rem;
  }

  .quantity-btn {
    width: 32px;
    height: 32px;
    border: none;
    background: white;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }

  .quantity-btn:hover {
    background: var(--accent-gold);
  }

  .quantity-input {
    width: 40px;
    text-align: center;
    border: none;
    background: transparent;
    font-size: 1rem;
    font-weight: 600;
  }

  .remove-btn {
    background: rgba(255, 59, 48, 0.1);
    color: var(--accent-red);
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.3s ease;
  }

  .remove-btn:hover {
    background: rgba(255, 59, 48, 0.2);
  }

  .item-price {
    text-align: right;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .current-price {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary-black);
  }

  .original-price {
    font-size: 1rem;
    color: var(--text-light);
    text-decoration: line-through;
  }

  .item-total {
    font-size: 1.8rem;
    font-weight: 800;
    color: var(--primary-black);
  }

  /* Cart Summary */
  .cart-summary {
    background: var(--bg-light);
    border-radius: 15px;
    padding: 2rem;
    height: fit-content;
    position: sticky;
    top: 100px;
  }

  .summary-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid rgba(0, 0, 0, 0.1);
  }

  .summary-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  }

  .summary-total {
    font-size: 1.8rem;
    font-weight: 800;
    margin: 1.5rem 0;
    padding-top: 1rem;
    border-top: 2px solid rgba(0, 0, 0, 0.1);
  }

  .delivery-note {
    background: rgba(52, 152, 219, 0.1);
    padding: 1rem;
    border-radius: 8px;
    margin: 1.5rem 0;
    font-size: 0.9rem;
    color: var(--info-blue);
  }

  .checkout-btn {
    width: 100%;
    padding: 1.2rem;
    background: var(--accent-gold);
    color: var(--primary-black);
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.8rem;
  }

  .checkout-btn:hover {
    background: #ffed4e;
    transform: translateY(-2px);
  }

  .continue-btn {
    width: 100%;
    padding: 1rem;
    background: transparent;
    color: var(--text-light);
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 1rem;
    text-align: center;
    text-decoration: none;
    display: block;
  }

  .continue-btn:hover {
    border-color: var(--accent-gold);
    color: var(--primary-black);
  }

  /* Cart Actions */
  .cart-actions {
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 2px solid var(--bg-light);
  }

  .clear-cart {
    background: rgba(255, 59, 48, 0.1);
    color: var(--accent-red);
    border: 2px solid rgba(255, 59, 48, 0.2);
    padding: 0.8rem 1.5rem;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .clear-cart:hover {
    background: rgba(255, 59, 48, 0.2);
  }

  .update-cart {
    background: var(--primary-black);
    color: white;
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .update-cart:hover {
    background: #333;
  }

  /* Notification */
  .notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 1rem 1.5rem;
    background: var(--success-green);
    color: white;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    z-index: 10000;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    animation: slideInRight 0.3s ease;
  }

  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  /* Footer */
  .main-footer {
    background: var(--primary-black);
    color: var(--primary-white);
    padding: 4rem 2rem 2rem;
    margin-top: 4rem;
  }
</style>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>

<!-- Header -->
<header class="main-header">
  <div class="header-container">
    <a href="index.html" class="logo">
      <div class="logo-icon">üëë</div>
      <div>
        <div class="logo-text">DROP SHOP</div>
        <div class="logo-subtitle">–Ø–ö–£–¢–°–ö | –û–†–ò–ì–ò–ù–ê–õ–´ & –†–ï–ü–õ–ò–ö–ò</div>
      </div>
    </a>

    <nav class="main-nav">
      <a href="index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="catalog.html" class="nav-link">–ö–∞—Ç–∞–ª–æ–≥</a>
      <a href="about.html" class="nav-link">–û –Ω–∞—Å</a>
      <a href="contact.html" class="nav-link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    </nav>

    <div class="header-actions">
      <button class="action-btn" onclick="window.location.href='wishlist.html'">
        <i class="far fa-heart"></i>
        <span class="badge" id="wishlistCount">0</span>
      </button>
      <button class="action-btn" onclick="window.location.href='compare.html'">
        <i class="fas fa-balance-scale"></i>
        <span class="badge" id="compareCount">0</span>
      </button>
      <button class="action-btn" onclick="window.location.href='cart.html'">
        <i class="fas fa-shopping-bag"></i>
        <span class="badge cart-badge" id="cartCount">0</span>
      </button>
    </div>
  </div>
</header>

<!-- Cart Content -->
<div class="cart-container">
  <div class="cart-header">
    <h1 class="cart-title">–ö–æ—Ä–∑–∏–Ω–∞</h1>
    <div class="cart-stats">
      <span id="itemCount">0 —Ç–æ–≤–∞—Ä–æ–≤</span> ‚Ä¢ <span id="totalItems">0 —à—Ç.</span>
    </div>
  </div>

  <div class="cart-content">
    <!-- Cart Items -->
    <div class="cart-items" id="cartItems">
      <!-- Cart items loaded by JavaScript -->
    </div>

    <!-- Cart Summary -->
    <div class="cart-summary" id="cartSummary">
      <!-- Summary loaded by JavaScript -->
    </div>
  </div>

  <!-- Cart Actions -->
  <div class="cart-actions" id="cartActions">
    <!-- Actions loaded by JavaScript -->
  </div>
</div>

<!-- Notification Container -->
<div id="notificationContainer"></div>

<!-- Footer -->
<footer class="main-footer">
  <div class="footer-content">
    <div class="footer-column">
      <h3>DROP SHOP –Ø–ö–£–¢–°–ö</h3>
      <p style="color: var(--accent-silver); margin-bottom: 1.5rem;">–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω –≤ –Ø–∫—É—Ç—Å–∫–µ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–∞–º–∏ –ø–æ–¥ –∑–∞–∫–∞–∑ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ä–µ–ø–ª–∏–∫–∞–º–∏ –≤ –Ω–∞–ª–∏—á–∏–∏.</p>
    </div>
    
    <div class="footer-column">
      <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
      <ul>
        <li><i class="fas fa-map-marker-alt"></i> –Ø–∫—É—Ç—Å–∫, —É–ª. –õ–µ–Ω–∏–Ω–∞, 15</li>
        <li><i class="fas fa-phone"></i> +7 (999) 123-45-67</li>
        <li><i class="fas fa-envelope"></i> info@dropshop-ykt.ru</li>
      </ul>
    </div>
    
    <div class="footer-column">
      <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
      <ul>
        <li><a href="delivery.html">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</a></li>
        <li><a href="guarantee.html">–ì–∞—Ä–∞–Ω—Ç–∏—è</a></li>
        <li><a href="return.html">–í–æ–∑–≤—Ä–∞—Ç</a></li>
        <li><a href="admin.html" style="color: var(--accent-gold);"><i class="fas fa-lock"></i> –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a></li>
      </ul>
    </div>
  </div>
  
  <div class="copyright">
    <p>¬© 2024 DROP SHOP –Ø–∫—É—Ç—Å–∫. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </div>
</footer>

<script>
  // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  let cart = {};
  let wishlist = [];
  let compareList = [];

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤
  function updateCounters() {
    cart = JSON.parse(localStorage.getItem('cart')) || {};
    wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    compareList = JSON.parse(localStorage.getItem('compare')) || [];
    
    // –°—á–∏—Ç–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
    const totalItems = Object.values(cart).reduce((sum, item) => sum + (item.quantity || 1), 0);
    const uniqueItems = Object.keys(cart).length;
    
    document.getElementById('cartCount').textContent = totalItems > 99 ? '99+' : totalItems;
    document.getElementById('wishlistCount').textContent = wishlist.length > 99 ? '99+' : wishlist.length;
    document.getElementById('compareCount').textContent = compareList.length > 99 ? '99+' : compareList.length;
    
    document.getElementById('itemCount').textContent = `${uniqueItems} ${getWordForm(uniqueItems, ['—Ç–æ–≤–∞—Ä', '—Ç–æ–≤–∞—Ä–∞', '—Ç–æ–≤–∞—Ä–æ–≤'])}`;
    document.getElementById('totalItems').textContent = `${totalItems} ${getWordForm(totalItems, ['—à—Ç—É–∫–∞', '—à—Ç—É–∫–∏', '—à—Ç—É–∫'])}`;
  }

  // –§–æ—Ä–º—ã —Å–ª–æ–≤
  function getWordForm(number, forms) {
    const cases = [2, 0, 1, 1, 1, 2];
    return forms[(number % 100 > 4 && number % 100 < 20) ? 2 : cases[(number % 10 < 5) ? number % 10 : 5]];
  }

  // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
  function loadCart() {
    cart = JSON.parse(localStorage.getItem('cart')) || {};
    const itemsContainer = document.getElementById('cartItems');
    const summaryContainer = document.getElementById('cartSummary');
    const actionsContainer = document.getElementById('cartActions');
    
    if (Object.keys(cart).length === 0) {
      // –ü—É—Å—Ç–∞—è –∫–æ—Ä–∑–∏–Ω–∞
      itemsContainer.innerHTML = `
        <div class="cart-empty">
          <div class="empty-icon">üõí</div>
          <h2 class="empty-title">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h2>
          <p class="empty-text">–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</p>
          <a href="catalog.html" class="checkout-btn" style="max-width: 300px; margin: 0 auto;">
            <i class="fas fa-shopping-bag"></i> –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥
          </a>
        </div>
      `;
      
      summaryContainer.innerHTML = '';
      actionsContainer.innerHTML = '';
      return;
    }
    
    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã
    itemsContainer.innerHTML = Object.entries(cart).map(([key, item]) => {
      const itemTotal = item.price * (item.quantity || 1);
      const isOriginal = item.type === 'original';
      const typeClass = isOriginal ? 'type-original' : 'type-replica';
      const typeText = isOriginal ? '–û–†–ò–ì–ò–ù–ê–õ' : '–†–ï–ü–õ–ò–ö–ê';
      const deliveryText = isOriginal ? '–î–æ—Å—Ç–∞–≤–∫–∞ 7-14 –¥–Ω–µ–π' : '–í –Ω–∞–ª–∏—á–∏–∏ –≤ –Ø–∫—É—Ç—Å–∫–µ';
      
      return `
        <div class="cart-item" data-key="${key}">
          <img src="${item.image}" class="item-image" alt="${item.name}">
          
          <div class="item-info">
            <div class="item-header">
              <div class="item-category">${item.category || '–¢–æ–≤–∞—Ä'}</div>
              <h3 class="item-name">${item.name}</h3>
              <div>
                <span class="item-type ${typeClass}">${typeText}</span>
                ${item.size ? `<span style="color: var(--text-light);">–†–∞–∑–º–µ—Ä: ${item.size}</span>` : ''}
              </div>
            </div>
            
            <div class="item-details">
              <div>${deliveryText}</div>
              ${isOriginal ? '<div style="color: var(--accent-gold); margin-top: 0.5rem;">–¢–æ–≤–∞—Ä –ø–æ–¥ –∑–∞–∫–∞–∑. –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</div>' : ''}
            </div>
            
            <div class="item-actions">
              <div class="quantity-control">
                <button class="quantity-btn" onclick="updateQuantity('${key}', ${(item.quantity || 1) - 1})">-</button>
                <input type="number" class="quantity-input" value="${item.quantity || 1}" min="1" 
                       onchange="updateQuantity('${key}', this.value)">
                <button class="quantity-btn" onclick="updateQuantity('${key}', ${(item.quantity || 1) + 1})">+</button>
              </div>
              <button class="remove-btn" onclick="removeItem('${key}')">
                <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
              </button>
            </div>
          </div>
          
          <div class="item-price">
            <div>
              <div class="current-price">${item.price.toLocaleString()} ‚ÇΩ</div>
              ${item.originalPrice && item.originalPrice > item.price ? `
                <div class="original-price">${item.originalPrice.toLocaleString()} ‚ÇΩ</div>
              ` : ''}
            </div>
            <div class="item-total">${itemTotal.toLocaleString()} ‚ÇΩ</div>
          </div>
        </div>
      `;
    }).join('');
    
    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∏—Ç–æ–≥–∏
    calculateSummary();
    
    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–µ–π—Å—Ç–≤–∏—è
    actionsContainer.innerHTML = `
      <button class="clear-cart" onclick="clearCart()">
        <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
      </button>
      <button class="update-cart" onclick="saveCart()">
        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
      </button>
    `;
  }

  // –†–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤
  function calculateSummary() {
    const cartItems = Object.values(cart);
    
    // –°—á–∏—Ç–∞–µ–º —Å—É–º–º—ã –ø–æ —Ç–∏–ø–∞–º —Ç–æ–≤–∞—Ä–æ–≤
    let replicaSubtotal = 0;
    let originalSubtotal = 0;
    let replicaCount = 0;
    let originalCount = 0;
    
    cartItems.forEach(item => {
      const itemTotal = item.price * (item.quantity || 1);
      if (item.type === 'original') {
        originalSubtotal += itemTotal;
        originalCount += (item.quantity || 1);
      } else {
        replicaSubtotal += itemTotal;
        replicaCount += (item.quantity || 1);
      }
    });
    
    const subtotal = replicaSubtotal + originalSubtotal;
    
    // –î–æ—Å—Ç–∞–≤–∫–∞: –±–µ—Å–ø–ª–∞—Ç–Ω–æ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 5000‚ÇΩ
    const delivery = subtotal >= 5000 ? 0 : 300;
    const total = subtotal + delivery;
    
    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–≤–æ–¥–∫—É
    document.getElementById('cartSummary').innerHTML = `
      <h3 class="summary-title">–°–≤–æ–¥–∫–∞ –∑–∞–∫–∞–∑–∞</h3>
      
      ${replicaCount > 0 ? `
        <div class="summary-row">
          <span>–†–µ–ø–ª–∏–∫–∏ (${replicaCount} —à—Ç.)</span>
          <span>${replicaSubtotal.toLocaleString()} ‚ÇΩ</span>
        </div>
      ` : ''}
      
      ${originalCount > 0 ? `
        <div class="summary-row">
          <span>–û—Ä–∏–≥–∏–Ω–∞–ª—ã (${originalCount} —à—Ç.)</span>
          <span>${originalSubtotal.toLocaleString()} ‚ÇΩ</span>
        </div>
      ` : ''}
      
      <div class="summary-row">
        <span>–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤</span>
        <span>${subtotal.toLocaleString()} ‚ÇΩ</span>
      </div>
      
      <div class="summary-row">
        <span>–î–æ—Å—Ç–∞–≤–∫–∞</span>
        <span>${delivery === 0 ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : `${delivery.toLocaleString()} ‚ÇΩ`}</span>
      </div>
      
      ${delivery > 0 ? `
        <div class="delivery-note">
          <i class="fas fa-info-circle"></i>
          –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 5 000 ‚ÇΩ
        </div>
      ` : ''}
      
      <div class="summary-row summary-total">
        <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ</span>
        <span>${total.toLocaleString()} ‚ÇΩ</span>
      </div>
      
      <button class="checkout-btn" onclick="proceedToCheckout()">
        <i class="fas fa-lock"></i> –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é
      </button>
      
      <a href="catalog.html" class="continue-btn">
        <i class="fas fa-arrow-left"></i> –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏
      </a>
    `;
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
  function updateQuantity(key, newQuantity) {
    newQuantity = parseInt(newQuantity);
    
    if (isNaN(newQuantity) || newQuantity < 1) {
      newQuantity = 1;
    }
    
    if (cart[key]) {
      cart[key].quantity = newQuantity;
      localStorage.setItem('cart', JSON.stringify(cart));
      loadCart();
      updateCounters();
      showNotification('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ');
    }
  }

  // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
  function removeItem(key) {
    if (cart[key]) {
      const itemName = cart[key].name;
      delete cart[key];
      localStorage.setItem('cart', JSON.stringify(cart));
      loadCart();
      updateCounters();
      showNotification(`"${itemName}" —É–¥–∞–ª–µ–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã`);
    }
  }

  // –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
  function clearCart() {
    if (Object.keys(cart).length === 0) return;
    
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É?')) {
      cart = {};
      localStorage.removeItem('cart');
      loadCart();
      updateCounters();
      showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞');
    }
  }

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
  function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
    showNotification('–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
  }

  // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é
  function proceedToCheckout() {
    if (Object.keys(cart).length === 0) {
      showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞', 'error');
      return;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ
    const hasOriginals = Object.values(cart).some(item => item.type === 'original');
    
    if (hasOriginals) {
      const confirmMessage = `
        –í –≤–∞—à–µ–π –∫–æ—Ä–∑–∏–Ω–µ –µ—Å—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –ø–æ–¥ –∑–∞–∫–∞–∑.
        
        –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:
        ‚Ä¢ –°—Ç–æ–∏–º–æ—Å—Ç—å –±—É–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
        ‚Ä¢ –°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏: 7-14 –¥–Ω–µ–π
        ‚Ä¢ –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞: 50% –æ—Ç —Å—É–º–º—ã
        ‚Ä¢ –û—Å—Ç–∞–ª—å–Ω–æ–µ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏
        
        –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ?
      `;
      
      if (!confirm(confirmMessage)) {
        return;
      }
    }
    
    window.location.href = 'checkout.html';
  }

  // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  function showNotification(message, type = 'success') {
    const container = document.getElementById('notificationContainer');
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.style.background = type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#3498db';
    notification.innerHTML = `
      <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
      <span>${message}</span>
    `;
    
    container.appendChild(notification);
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ
    setTimeout(() => {
      notification.style.animation = 'slideInRight 0.3s ease reverse';
      setTimeout(() => notification.remove(), 300);
    }, 3000);
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  document.addEventListener('DOMContentLoaded', function() {
    updateCounters();
    loadCart();
  });
</script>
</body>
</html>