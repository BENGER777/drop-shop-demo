<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DROP SHOP | –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root {
    --primary-black: #0a0a0a;
    --primary-white: #ffffff;
    --accent-gold: #FFD700;
    --accent-silver: #C0C0C0;
    --accent-red: #FF3B30;
    --bg-light: #f8f9fa;
    --bg-dark: #1a1a1a;
    --text-light: #666666;
    --success-green: #27ae60;
    --info-blue: #3498db;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background-color: var(--primary-white);
    color: var(--primary-black);
    line-height: 1.6;
    padding-top: 80px;
  }

  /* Header (–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π index.html) */
  .main-header {
    background: var(--primary-black);
    padding: 1rem 2rem;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .header-container {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
  }

  .logo-icon {
    font-size: 2.2rem;
    color: var(--accent-gold);
  }

  .logo-text {
    font-family: 'Helvetica Neue', sans-serif;
    font-weight: 900;
    font-size: 1.8rem;
    color: var(--primary-white);
    letter-spacing: -0.5px;
  }

  .logo-subtitle {
    font-size: 0.7rem;
    color: var(--accent-silver);
    margin-top: -5px;
    letter-spacing: 1.5px;
  }

  /* Product Detail */
  .product-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
  }

  .product-main {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    margin-bottom: 4rem;
  }

  @media (max-width: 992px) {
    .product-main {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
  }

  /* Product Gallery */
  .product-gallery {
    position: sticky;
    top: 100px;
    height: fit-content;
  }

  .main-image-container {
    position: relative;
    margin-bottom: 1rem;
    border-radius: 15px;
    overflow: hidden;
    background: var(--bg-light);
  }

  .main-image {
    width: 100%;
    height: 500px;
    object-fit: contain;
    cursor: zoom-in;
    transition: transform 0.3s ease;
  }

  .main-image:hover {
    transform: scale(1.02);
  }

  .image-badges {
    position: absolute;
    top: 20px;
    left: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 2;
  }

  .product-badge {
    padding: 0.5rem 1rem;
    border-radius: 25px;
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .badge-original {
    background: linear-gradient(135deg, var(--accent-gold), #FFA500);
    color: var(--primary-black);
  }

  .badge-replica {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
  }

  .badge-stock {
    background: var(--success-green);
    color: white;
  }

  .badge-preorder {
    background: linear-gradient(135deg, #f093fb, #f5576c);
    color: white;
  }

  .thumbnail-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
  }

  .thumbnail {
    width: 100%;
    height: 100px;
    object-fit: cover;
    border-radius: 8px;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
  }

  .thumbnail:hover,
  .thumbnail.active {
    border-color: var(--accent-gold);
    transform: translateY(-2px);
  }

  /* Product Info */
  .product-info {
    padding: 1rem 0;
  }

  .product-category {
    font-size: 0.9rem;
    color: var(--text-light);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 0.5rem;
  }

  .product-title {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 1rem;
    line-height: 1.2;
  }

  .product-rating {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .stars {
    color: var(--accent-gold);
    font-size: 1.2rem;
  }

  .rating-count {
    color: var(--text-light);
    font-size: 0.9rem;
  }

  .price-container {
    background: var(--bg-light);
    padding: 1.5rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    border-left: 4px solid var(--accent-gold);
  }

  .current-price {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--primary-black);
    margin-bottom: 0.5rem;
  }

  .original-price {
    font-size: 1.5rem;
    color: var(--text-light);
    text-decoration: line-through;
    margin-bottom: 0.5rem;
  }

  .savings {
    color: var(--success-green);
    font-weight: 600;
    font-size: 1.1rem;
  }

  .delivery-info {
    background: rgba(52, 152, 219, 0.1);
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 2rem;
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .delivery-icon {
    font-size: 1.5rem;
    color: var(--info-blue);
  }

  .delivery-text strong {
    color: var(--info-blue);
  }

  /* Options */
  .options-section {
    margin-bottom: 2rem;
  }

  .option-title {
    font-weight: 600;
    margin-bottom: 1rem;
    font-size: 1.1rem;
  }

  .size-options {
    display: flex;
    flex-wrap: wrap;
    gap: 0.8rem;
    margin-bottom: 1.5rem;
  }

  .size-btn {
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    background: white;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .size-btn:hover {
    border-color: var(--accent-gold);
    transform: translateY(-2px);
  }

  .size-btn.selected {
    background: var(--accent-gold);
    color: var(--primary-black);
    border-color: var(--accent-gold);
  }

  .size-btn.unavailable {
    opacity: 0.5;
    cursor: not-allowed;
    text-decoration: line-through;
  }

  .color-options {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .color-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 3px solid transparent;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .color-btn:hover {
    transform: scale(1.1);
  }

  .color-btn.selected {
    border-color: var(--primary-black);
  }

  /* Actions */
  .product-actions {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .btn {
    flex: 1;
    padding: 1.2rem;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.8rem;
  }

  .btn-primary {
    background: var(--primary-black);
    color: var(--primary-white);
  }

  .btn-primary:hover {
    background: var(--accent-gold);
    color: var(--primary-black);
    transform: translateY(-2px);
  }

  .btn-secondary {
    background: var(--bg-light);
    color: var(--primary-black);
    border: 2px solid #e0e0e0;
  }

  .btn-secondary:hover {
    background: #e9ecef;
    border-color: var(--accent-gold);
  }

  .btn-danger {
    background: rgba(255, 59, 48, 0.1);
    color: var(--accent-red);
    border: 2px solid rgba(255, 59, 48, 0.2);
  }

  .btn-danger:hover {
    background: rgba(255, 59, 48, 0.2);
  }

  /* Description */
  .description-section {
    margin-bottom: 3rem;
  }

  .description-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    position: relative;
    padding-bottom: 0.5rem;
  }

  .description-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 60px;
    height: 3px;
    background: var(--accent-gold);
  }

  .description-content {
    line-height: 1.8;
    color: var(--text-light);
  }

  .specs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-top: 1.5rem;
  }

  .spec-item {
    display: flex;
    justify-content: space-between;
    padding: 1rem;
    background: var(--bg-light);
    border-radius: 8px;
  }

  .spec-label {
    font-weight: 600;
  }

  .spec-value {
    color: var(--text-light);
  }

  /* Reviews */
  .reviews-section {
    margin-bottom: 3rem;
  }

  .reviews-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }

  .review-form {
    background: var(--bg-light);
    padding: 2rem;
    border-radius: 12px;
    margin-bottom: 2rem;
  }

  .review-form textarea {
    width: 100%;
    padding: 1rem;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    margin-bottom: 1rem;
    font-family: inherit;
    resize: vertical;
    min-height: 100px;
  }

  /* Related Products */
  .related-products {
    margin-top: 4rem;
  }

  .related-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 2rem;
    text-align: center;
  }

  .related-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 2rem;
  }

  /* Image Modal */
  .image-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 10000;
    justify-content: center;
    align-items: center;
  }

  .modal-image {
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
  }

  .modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    color: white;
    font-size: 3rem;
    cursor: pointer;
    background: none;
    border: none;
  }

  /* Notification */
  .notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 1rem 1.5rem;
    background: var(--success-green);
    color: white;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    z-index: 10000;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    animation: slideInRight 0.3s ease;
  }

  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  /* Footer (–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π index.html) */
  .main-footer {
    background: var(--primary-black);
    color: var(--primary-white);
    padding: 4rem 2rem 2rem;
    margin-top: 4rem;
  }
</style>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>

<!-- Header -->
<header class="main-header">
  <div class="header-container">
    <a href="index.html" class="logo">
      <div class="logo-icon">üëë</div>
      <div>
        <div class="logo-text">DROP SHOP</div>
        <div class="logo-subtitle">–Ø–ö–£–¢–°–ö | –û–†–ò–ì–ò–ù–ê–õ–´ & –†–ï–ü–õ–ò–ö–ò</div>
      </div>
    </a>

    <nav class="main-nav">
      <a href="index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="catalog.html" class="nav-link">–ö–∞—Ç–∞–ª–æ–≥</a>
      <a href="about.html" class="nav-link">–û –Ω–∞—Å</a>
      <a href="contact.html" class="nav-link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    </nav>

    <div class="header-actions">
      <button class="action-btn" onclick="toggleWishlist()">
        <i class="far fa-heart"></i>
        <span class="badge" id="wishlistCount">0</span>
      </button>
      <button class="action-btn" onclick="toggleCompare()">
        <i class="fas fa-balance-scale"></i>
        <span class="badge" id="compareCount">0</span>
      </button>
      <button class="action-btn" onclick="window.location.href='cart.html'">
        <i class="fas fa-shopping-bag"></i>
        <span class="badge cart-badge" id="cartCount">0</span>
      </button>
    </div>
  </div>
</header>

<!-- Product Detail -->
<div class="product-container">
  <div class="product-main" id="productMain">
    <!-- Content loaded by JavaScript -->
  </div>

  <!-- Description & Specs -->
  <div class="description-section" id="descriptionSection">
    <!-- Content loaded by JavaScript -->
  </div>

  <!-- Reviews -->
  <div class="reviews-section" id="reviewsSection">
    <!-- Content loaded by JavaScript -->
  </div>

  <!-- Related Products -->
  <div class="related-products" id="relatedProducts">
    <!-- Content loaded by JavaScript -->
  </div>
</div>

<!-- Image Modal -->
<div class="image-modal" id="imageModal">
  <button class="modal-close" onclick="closeImageModal()">&times;</button>
  <img class="modal-image" id="modalImage" alt="">
</div>

<!-- Notification Container -->
<div id="notificationContainer"></div>

<!-- Footer -->
<footer class="main-footer">
  <div class="footer-content">
    <div class="footer-column">
      <h3>DROP SHOP –Ø–ö–£–¢–°–ö</h3>
      <p style="color: var(--accent-silver); margin-bottom: 1.5rem;">–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω –≤ –Ø–∫—É—Ç—Å–∫–µ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–∞–º–∏ –ø–æ–¥ –∑–∞–∫–∞–∑ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ä–µ–ø–ª–∏–∫–∞–º–∏ –≤ –Ω–∞–ª–∏—á–∏–∏.</p>
    </div>
    
    <div class="footer-column">
      <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
      <ul>
        <li><i class="fas fa-map-marker-alt"></i> –Ø–∫—É—Ç—Å–∫, —É–ª. –õ–µ–Ω–∏–Ω–∞, 15</li>
        <li><i class="fas fa-phone"></i> +7 (999) 123-45-67</li>
        <li><i class="fas fa-envelope"></i> info@dropshop-ykt.ru</li>
      </ul>
    </div>
    
    <div class="footer-column">
      <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
      <ul>
        <li><a href="delivery.html">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</a></li>
        <li><a href="guarantee.html">–ì–∞—Ä–∞–Ω—Ç–∏—è</a></li>
        <li><a href="return.html">–í–æ–∑–≤—Ä–∞—Ç</a></li>
        <li><a href="admin.html" style="color: var(--accent-gold);"><i class="fas fa-lock"></i> –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a></li>
      </ul>
    </div>
  </div>
  
  <div class="copyright">
    <p>¬© 2024 DROP SHOP –Ø–∫—É—Ç—Å–∫. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </div>
</footer>

<script>
  // –ü–æ–ª—É—á–∞–µ–º ID —Ç–æ–≤–∞—Ä–∞ –∏–∑ URL
  const urlParams = new URLSearchParams(window.location.search);
  const productId = parseInt(urlParams.get('id')) || 101;

  // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  let currentProduct = null;
  let selectedSize = null;
  let selectedColor = null;
  let isInWishlist = false;
  let isInCompare = false;

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤
  function updateCounters() {
    const cart = JSON.parse(localStorage.getItem('cart')) || {};
    const wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    const compareList = JSON.parse(localStorage.getItem('compare')) || [];
    
    const cartCount = Object.values(cart).reduce((sum, item) => sum + (item.quantity || 1), 0);
    const wishlistCount = wishlist.length;
    const compareCount = compareList.length;
    
    document.getElementById('cartCount').textContent = cartCount > 99 ? '99+' : cartCount;
    document.getElementById('wishlistCount').textContent = wishlistCount > 99 ? '99+' : wishlistCount;
    document.getElementById('compareCount').textContent = compareCount > 99 ? '99+' : compareCount;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ç–æ–≤–∞—Ä –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏
    isInWishlist = wishlist.includes(productId);
    isInCompare = compareList.includes(productId);
  }

  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞
  async function loadProduct() {
    try {
      // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ
      const detailedProducts = JSON.parse(localStorage.getItem('detailedProducts')) || {};
      currentProduct = detailedProducts[productId];
      
      if (!currentProduct) {
        // –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
        const catalogProducts = JSON.parse(localStorage.getItem('catalogProducts')) || [];
        const catalogProduct = catalogProducts.find(p => p.id == productId);
        
        if (!catalogProduct) {
          document.getElementById('productMain').innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 4rem;">
              <h2 style="margin-bottom: 1rem;">–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω</h2>
              <p style="margin-bottom: 2rem;">–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –±—ã–ª —É–¥–∞–ª–µ–Ω.</p>
              <a href="catalog.html" class="btn btn-primary" style="display: inline-flex;">
                –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥
              </a>
            </div>
          `;
          return;
        }
        
        // –°–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        currentProduct = {
          ...catalogProduct,
          description: '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç. –ó–∞ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –º–µ–Ω–µ–¥–∂–µ—Ä—É.',
          images: [catalogProduct.image],
          sizes: ['S', 'M', 'L', 'XL'],
          color: '–ß–µ—Ä–Ω—ã–π',
          material: '–ù–µ —É–∫–∞–∑–∞–Ω',
          inStock: true,
          stockCount: 10,
          rating: 4.0,
          reviews: []
        };
      }
      
      // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–æ–≤–∞—Ä
      renderProduct();
      updateCounters();
      
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–∞:', error);
      showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–∞', 'error');
    }
  }

  // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
  function renderProduct() {
    const { 
      name, 
      price, 
      originalPrice, 
      type, 
      category, 
      images = [], 
      sizes = [], 
      color,
      material,
      description,
      inStock,
      stockCount,
      rating,
      reviews = [],
      deliveryTime
    } = currentProduct;
    
    const isOriginal = type === 'original';
    const badgeClass = isOriginal ? 'badge-original' : 'badge-replica';
    const stockBadgeClass = inStock ? 'badge-stock' : 'badge-preorder';
    const stockText = inStock ? '–í –Ω–∞–ª–∏—á–∏–∏' : '–ü–æ–¥ –∑–∞–∫–∞–∑';
    const deliveryText = deliveryTime || (isOriginal ? '7-14 –¥–Ω–µ–π' : '2-3 —á–∞—Å–∞');
    
    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–∫–∏–¥–∫—É –¥–ª—è —Ä–µ–ø–ª–∏–∫
    const savings = originalPrice && originalPrice > price 
      ? Math.round((1 - price / originalPrice) * 100)
      : null;
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∑–≤–µ–∑–¥—ã —Ä–µ–π—Ç–∏–Ω–≥–∞
    const stars = '‚òÖ'.repeat(Math.floor(rating)) + '‚òÜ'.repeat(5 - Math.floor(rating));
    
    // –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Ç–æ–≤–∞—Ä–∞
    document.getElementById('productMain').innerHTML = `
      <!-- –ì–∞–ª–µ—Ä–µ—è -->
      <div class="product-gallery">
        <div class="main-image-container">
          <div class="image-badges">
            <div class="product-badge ${badgeClass}">
              ${isOriginal ? '–û–†–ò–ì–ò–ù–ê–õ' : '–†–ï–ü–õ–ò–ö–ê'}
            </div>
            <div class="product-badge ${stockBadgeClass}">
              ${stockText} ${inStock ? `(${stockCount} —à—Ç.)` : ''}
            </div>
          </div>
          <img src="${images[0] || 'https://images.unsplash.com/photo-1560769629-975ec94e6a86?auto=format&fit=crop&w=800&q=80'}" 
               class="main-image" 
               alt="${name}"
               onclick="openImageModal(this.src)">
        </div>
        
        <div class="thumbnail-grid">
          ${images.slice(0, 4).map((img, index) => `
            <img src="${img}" 
                 class="thumbnail ${index === 0 ? 'active' : ''}" 
                 alt="–í–∏–¥ ${index + 1}"
                 onclick="changeMainImage(this, ${index})">
          `).join('')}
        </div>
      </div>
      
      <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ -->
      <div class="product-info">
        <div class="product-category">${category.toUpperCase()}</div>
        <h1 class="product-title">${name}</h1>
        
        <div class="product-rating">
          <div class="stars">${stars}</div>
          <div class="rating-count">${rating.toFixed(1)} (${reviews.length} –æ—Ç–∑—ã–≤–æ–≤)</div>
        </div>
        
        <div class="price-container">
          <div class="current-price">${price.toLocaleString()} ‚ÇΩ</div>
          ${originalPrice && originalPrice > price ? `
            <div class="original-price">${originalPrice.toLocaleString()} ‚ÇΩ</div>
            <div class="savings">–≠–∫–æ–Ω–æ–º–∏—è ${savings}%</div>
          ` : ''}
        </div>
        
        <div class="delivery-info">
          <div class="delivery-icon">üöö</div>
          <div class="delivery-text">
            <strong>–î–æ—Å—Ç–∞–≤–∫–∞:</strong> ${deliveryText}<br>
            <small>${isOriginal ? '–û—Ä–∏–≥–∏–Ω–∞–ª—ã –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ–¥ –∑–∞–∫–∞–∑ –∏–∑ –ú–æ—Å–∫–≤—ã' : '–†–µ–ø–ª–∏–∫–∏ –≤ –Ω–∞–ª–∏—á–∏–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ –≤ –Ø–∫—É—Ç—Å–∫–µ'}</small>
          </div>
        </div>
        
        <!-- –†–∞–∑–º–µ—Ä—ã -->
        <div class="options-section">
          <div class="option-title">–†–∞–∑–º–µ—Ä:</div>
          <div class="size-options" id="sizeOptions">
            ${sizes.map(size => `
              <button class="size-btn ${selectedSize === size ? 'selected' : ''}" 
                      onclick="selectSize('${size}')">
                ${size}
              </button>
            `).join('')}
          </div>
        </div>
        
        <!-- –î–µ–π—Å—Ç–≤–∏—è -->
        <div class="product-actions">
          <button class="btn btn-primary" onclick="addToCart()" ${!inStock && !isOriginal ? 'disabled style="opacity: 0.5; cursor: not-allowed;"' : ''}>
            <i class="fas fa-shopping-bag"></i>
            ${isOriginal ? '–ó–ê–ö–ê–ó–ê–¢–¨ –û–†–ò–ì–ò–ù–ê–õ' : (inStock ? '–î–û–ë–ê–í–ò–¢–¨ –í –ö–û–†–ó–ò–ù–£' : '–ü–†–ï–î–ó–ê–ö–ê–ó')}
          </button>
          
          <button class="btn btn-secondary" onclick="toggleWishlistProduct()">
            <i class="far fa-heart"></i>
            ${isInWishlist ? '–í –ò–ó–ë–†–ê–ù–ù–û–ú' : '–í –ò–ó–ë–†–ê–ù–ù–û–ï'}
          </button>
          
          <button class="btn btn-secondary" onclick="toggleCompareProduct()">
            <i class="fas fa-balance-scale"></i>
            –°–†–ê–í–ù–ò–¢–¨
          </button>
        </div>
      </div>
    `;
    
    // –û–ø–∏—Å–∞–Ω–∏–µ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    document.getElementById('descriptionSection').innerHTML = `
      <h2 class="description-title">–û —Ç–æ–≤–∞—Ä–µ</h2>
      <div class="description-content">
        ${description}
      </div>
      
      <div class="specs-grid">
        <div class="spec-item">
          <span class="spec-label">–¢–∏–ø:</span>
          <span class="spec-value">${isOriginal ? '–û—Ä–∏–≥–∏–Ω–∞–ª' : '–†–µ–ø–ª–∏–∫–∞'}</span>
        </div>
        
        <div class="spec-item">
          <span class="spec-label">–ú–∞—Ç–µ—Ä–∏–∞–ª:</span>
          <span class="spec-value">${material || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
        </div>
        
        <div class="spec-item">
          <span class="spec-label">–¶–≤–µ—Ç:</span>
          <span class="spec-value">${color || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
        </div>
        
        <div class="spec-item">
          <span class="spec-label">–ù–∞–ª–∏—á–∏–µ:</span>
          <span class="spec-value">${inStock ? '–í –Ω–∞–ª–∏—á–∏–∏' : '–ü–æ–¥ –∑–∞–∫–∞–∑'}</span>
        </div>
        
        <div class="spec-item">
          <span class="spec-label">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
          <span class="spec-value">${deliveryText}</span>
        </div>
        
        ${isOriginal ? `
          <div class="spec-item">
            <span class="spec-label">–ì–∞—Ä–∞–Ω—Ç–∏—è:</span>
            <span class="spec-value">1 –≥–æ–¥</span>
          </div>
        ` : `
          <div class="spec-item">
            <span class="spec-label">–ì–∞—Ä–∞–Ω—Ç–∏—è:</span>
            <span class="spec-value">30 –¥–Ω–µ–π</span>
          </div>
        `}
      </div>
    `;
    
    // –û—Ç–∑—ã–≤—ã
    document.getElementById('reviewsSection').innerHTML = `
      <div class="reviews-header">
        <h2 class="description-title">–û—Ç–∑—ã–≤—ã (${reviews.length})</h2>
        <button class="btn btn-secondary" onclick="openReviewForm()">
          <i class="fas fa-plus"></i> –ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤
        </button>
      </div>
      
      ${reviews.length > 0 ? reviews.map(review => `
        <div class="review-form" style="background: white; margin-bottom: 1rem;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
            <strong>${review.author}</strong>
            <div class="stars">${'‚òÖ'.repeat(review.rating)}${'‚òÜ'.repeat(5 - review.rating)}</div>
          </div>
          <p>${review.text}</p>
          <small style="color: var(--text-light);">${review.date}</small>
        </div>
      `).join('') : `
        <div class="review-form" style="text-align: center; padding: 3rem;">
          <i class="far fa-comment-alt" style="font-size: 3rem; color: var(--text-light); margin-bottom: 1rem;"></i>
          <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
        </div>
      `}
    `;
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã
    loadRelatedProducts();
  }

  // –°–º–µ–Ω–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  function changeMainImage(thumbnail, index) {
    const mainImage = document.querySelector('.main-image');
    const thumbnails = document.querySelectorAll('.thumbnail');
    
    mainImage.src = thumbnail.src;
    thumbnails.forEach(t => t.classList.remove('active'));
    thumbnail.classList.add('active');
  }

  // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
  function openImageModal(src) {
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    
    modalImage.src = src;
    modal.style.display = 'flex';
  }

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
  function closeImageModal() {
    document.getElementById('imageModal').style.display = 'none';
  }

  // –í—ã–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞
  function selectSize(size) {
    selectedSize = size;
    const sizeButtons = document.querySelectorAll('.size-btn');
    sizeButtons.forEach(btn => btn.classList.remove('selected'));
    event.target.classList.add('selected');
  }

  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
  function addToCart() {
    if (!currentProduct) return;
    
    // –î–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–≤ –ø–æ–¥ –∑–∞–∫–∞–∑ –Ω–µ —Ç—Ä–µ–±—É–µ–º –≤—ã–±–æ—Ä–∞ —Ä–∞–∑–º–µ—Ä–∞
    if (!currentProduct.type === 'original' && !selectedSize && currentProduct.sizes.length > 1) {
      showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–º–µ—Ä', 'error');
      return;
    }
    
    const cart = JSON.parse(localStorage.getItem('cart')) || {};
    const cartKey = `${productId}_${selectedSize || 'default'}_${Date.now()}`;
    
    cart[cartKey] = {
      id: productId,
      name: currentProduct.name,
      price: currentProduct.price,
      originalPrice: currentProduct.originalPrice,
      image: currentProduct.images[0],
      type: currentProduct.type,
      category: currentProduct.category,
      size: selectedSize || currentProduct.sizes[0],
      quantity: 1,
      inStock: currentProduct.inStock,
      deliveryTime: currentProduct.deliveryTime || (currentProduct.type === 'original' ? '7-14 –¥–Ω–µ–π' : '2-3 —á–∞—Å–∞'),
      addedAt: new Date().toISOString()
    };
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCounters();
    
    const message = currentProduct.type === 'original' 
      ? `–û—Ä–∏–≥–∏–Ω–∞–ª "${currentProduct.name}" –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∑–∞–∫–∞–∑! –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏.`
      : `–†–µ–ø–ª–∏–∫–∞ "${currentProduct.name}" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É!`;
    
    showNotification(message);
  }

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
  function toggleWishlistProduct() {
    const wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    const index = wishlist.indexOf(productId);
    
    if (index === -1) {
      wishlist.push(productId);
      isInWishlist = true;
      showNotification('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ');
    } else {
      wishlist.splice(index, 1);
      isInWishlist = false;
      showNotification('–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ');
    }
    
    localStorage.setItem('wishlist', JSON.stringify(wishlist));
    updateCounters();
    renderProduct(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
  }

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
  function toggleCompareProduct() {
    const compareList = JSON.parse(localStorage.getItem('compare')) || [];
    
    if (compareList.length >= 3 && !isInCompare) {
      showNotification('–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ –±–æ–ª–µ–µ 3 —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è', 'error');
      return;
    }
    
    const index = compareList.indexOf(productId);
    
    if (index === -1) {
      compareList.push(productId);
      isInCompare = true;
      showNotification('–î–æ–±–∞–≤–ª–µ–Ω–æ –∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é');
    } else {
      compareList.splice(index, 1);
      isInCompare = false;
      showNotification('–£–¥–∞–ª–µ–Ω–æ –∏–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è');
    }
    
    localStorage.setItem('compare', JSON.stringify(compareList));
    updateCounters();
  }

  // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
  function loadRelatedProducts() {
    const catalogProducts = JSON.parse(localStorage.getItem('catalogProducts')) || [];
    
    // –ò—â–µ–º —Ç–æ–≤–∞—Ä—ã —Ç–æ–π –∂–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –Ω–æ –Ω–µ —Ç–µ–∫—É—â–∏–π
    const related = catalogProducts
      .filter(p => p.id !== productId && p.category === currentProduct.category)
      .slice(0, 4);
    
    if (related.length === 0) return;
    
    document.getElementById('relatedProducts').innerHTML = `
      <h2 class="related-title">–ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã</h2>
      <div class="related-grid">
        ${related.map(product => `
          <div class="product-card" style="border: 1px solid #e0e0e0; border-radius: 12px; overflow: hidden;">
            <img src="${product.image}" 
                 style="width: 100%; height: 200px; object-fit: cover;"
                 alt="${product.name}">
            <div style="padding: 1rem;">
              <div style="font-size: 0.8rem; color: var(--text-light); margin-bottom: 0.5rem;">
                ${product.category.toUpperCase()} ‚Ä¢ ${product.type === 'original' ? '–û–†–ò–ì–ò–ù–ê–õ' : '–†–ï–ü–õ–ò–ö–ê'}
              </div>
              <div style="font-weight: 600; margin-bottom: 0.5rem;">${product.name}</div>
              <div style="font-weight: 700; color: #27ae60; margin-bottom: 1rem;">${product.price.toLocaleString()} ‚ÇΩ</div>
              <button class="btn btn-secondary" style="width: 100%; padding: 0.8rem;" onclick="window.location.href='product.html?id=${product.id}'">
                –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å
              </button>
            </div>
          </div>
        `).join('')}
      </div>
    `;
  }

  // –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã –æ—Ç–∑—ã–≤–∞
  function openReviewForm() {
    const form = `
      <div class="review-form">
        <h3 style="margin-bottom: 1rem;">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h3>
        <div style="margin-bottom: 1rem;">
          <div style="font-weight: 600; margin-bottom: 0.5rem;">–í–∞—à–∞ –æ—Ü–µ–Ω–∫–∞:</div>
          <div id="ratingStars" style="font-size: 1.5rem; color: #e0e0e0; cursor: pointer;">
            <span onclick="setRating(1)">‚òÜ</span>
            <span onclick="setRating(2)">‚òÜ</span>
            <span onclick="setRating(3)">‚òÜ</span>
            <span onclick="setRating(4)">‚òÜ</span>
            <span onclick="setRating(5)">‚òÜ</span>
          </div>
        </div>
        <textarea id="reviewText" placeholder="–í–∞—à –æ—Ç–∑—ã–≤..."></textarea>
        <input type="text" id="reviewName" placeholder="–í–∞—à–µ –∏–º—è" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem;">
        <button class="btn btn-primary" onclick="submitReview()" style="width: 100%;">
          –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
        </button>
      </div>
    `;
    
    document.getElementById('reviewsSection').insertAdjacentHTML('beforeend', form);
  }

  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞
  function setRating(rating) {
    const stars = document.querySelectorAll('#ratingStars span');
    stars.forEach((star, index) => {
      star.textContent = index < rating ? '‚òÖ' : '‚òÜ';
      star.style.color = index < rating ? 'var(--accent-gold)' : '#e0e0e0';
    });
    window.currentRating = rating;
  }

  // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–∑—ã–≤–∞
  function submitReview() {
    const text = document.getElementById('reviewText')?.value;
    const name = document.getElementById('reviewName')?.value;
    const rating = window.currentRating || 5;
    
    if (!text || !name) {
      showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
      return;
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–∑—ã–≤ –∫ —Ç–æ–≤–∞—Ä—É
    const detailedProducts = JSON.parse(localStorage.getItem('detailedProducts')) || {};
    if (detailedProducts[productId]) {
      if (!detailedProducts[productId].reviews) {
        detailedProducts[productId].reviews = [];
      }
      
      detailedProducts[productId].reviews.push({
        author: name,
        text: text,
        rating: rating,
        date: new Date().toLocaleDateString('ru-RU')
      });
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π—Ç–∏–Ω–≥
      const reviews = detailedProducts[productId].reviews;
      const totalRating = reviews.reduce((sum, r) => sum + r.rating, 0);
      detailedProducts[productId].rating = (totalRating / reviews.length).toFixed(1);
      
      localStorage.setItem('detailedProducts', JSON.stringify(detailedProducts));
      
      // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
      loadProduct();
      showNotification('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤!');
    }
  }

  // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  function showNotification(message, type = 'success') {
    const container = document.getElementById('notificationContainer');
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.style.background = type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#3498db';
    notification.innerHTML = `
      <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
      <span>${message}</span>
    `;
    
    container.appendChild(notification);
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ
    setTimeout(() => {
      notification.style.animation = 'slideInRight 0.3s ease reverse';
      setTimeout(() => notification.remove(), 300);
    }, 3000);
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  document.addEventListener('DOMContentLoaded', function() {
    loadProduct();
    updateCounters();
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
    document.getElementById('imageModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeImageModal();
      }
    });
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeImageModal();
      }
    });
  });
</script>
</body>
</html>