<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DROP SHOP - –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</title>
<style>
/* –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
header {
  background-color: #000;
  padding: 20px 40px;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 2px 20px rgba(0,0,0,0.1);
}

header h1 {
  margin: 0;
  font-family: 'Helvetica Neue', sans-serif;
  font-weight: 800;
  color: #fff;
  font-size: 2.2em;
  letter-spacing: -0.5px;
}

nav {
  margin-top: 15px;
  display: flex;
  gap: 25px;
}

nav a {
  color: #fff;
  text-decoration: none;
  font-weight: 500;
  font-size: 1em;
  transition: color 0.3s;
  position: relative;
}

nav a:hover {
  color: #fff;
  opacity: 0.8;
}

nav a::after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 0;
  width: 0;
  height: 2px;
  background: #fff; /* –ë–µ–ª–∞—è –ª–∏–Ω–∏—è –≤–º–µ—Å—Ç–æ –∂–µ–ª—Ç–æ–π */
  transition: width 0.3s;
}

nav a:hover::after {
  width: 100%;
}
  body {
    margin: 0;
    font-family: 'Georgia', serif;
    background-color: #fff;
    color: #000;
  }

  header {
    background-color: #000;
    padding: 20px;
  }

  header h1 {
    margin: 0;
    font-family: 'Helvetica Neue', sans-serif;
    font-weight: 700;
    color: #fff;
    font-size: 2em;
  }

  nav {
    margin-top: 10px;
  }

  nav a {
    color: #fff;
    margin-right: 20px;
    text-decoration: none;
    font-weight: 600;
  }

  nav a:hover {
    text-decoration: underline;
  }

  section {
    padding: 40px 20px;
    max-width: 600px;
    margin: auto;
  }

  h2 {
    font-size: 2em;
    margin-bottom: 20px;
  }

  form {
    display: flex;
    flex-direction: column;
  }

  label {
    margin-bottom: 5px;
    font-weight: 600;
  }

  input, select, textarea {
    margin-bottom: 15px;
    padding: 10px;
    font-size: 1em;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  textarea {
    resize: vertical;
    min-height: 60px;
    font-family: inherit;
  }

  button {
    padding: 12px;
    background-color: #000;
    color: #fff;
    border: none;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.2s;
    border-radius: 4px;
  }

  button:hover {
    background-color: #444;
  }

  button:disabled {
    background-color: #ccc;
    cursor: not-allowed;
  }

  .error {
    color: red;
    margin-bottom: 10px;
    padding: 10px;
    background-color: #ffe6e6;
    border-radius: 4px;
  }

  .success {
    color: green;
    margin-bottom: 10px;
    padding: 10px;
    background-color: #e6ffe6;
    border-radius: 4px;
  }

  .order-summary {
    background-color: #f5f5f5;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 25px;
    border-left: 4px solid #000;
  }

  .order-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
  }

  .order-total {
    display: flex;
    justify-content: space-between;
    font-weight: bold;
    font-size: 1.2em;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 2px solid #000;
  }

  .loading {
    display: none;
    text-align: center;
    margin: 10px 0;
  }

  .loading-spinner {
    border: 3px solid #f3f3f3;
    border-top: 3px solid #000;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
    margin: 0 auto;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  .form-row {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
  }

  .form-group {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  @media (max-width: 768px) {
    .form-row {
      flex-direction: column;
      gap: 0;
    }
  }
</style>
</head>
<body>

<header>
  <h1>DROP SHOP</h1>
  <nav>
    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
    <a href="about.html">–û –Ω–∞—Å</a>
    <a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a>
    <a href="cart.html">–ö–æ—Ä–∑–∏–Ω–∞</a>
  </nav>
</header>

<section>
  <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
  
  <div class="order-summary" id="order-summary">
    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ —á–µ—Ä–µ–∑ JavaScript -->
  </div>

  <form id="order-form">
    <div class="error" id="error-message"></div>
    <div class="success" id="success-message" style="display: none;"></div>

    <div class="form-row">
      <div class="form-group">
        <label for="name">—Ñ–ò–û *</label>
        <input type="text" id="name" required>
      </div>
      <div class="form-group">
        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
        <input type="tel" id="phone" required placeholder="+7XXXXXXXXXX">
      </div>
    </div>

    <label for="email">Email</label>
    <input type="email" id="email" placeholder="example@mail.com">

    <label for="address">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
    <input type="text" id="address" required>

    <label for="city">–ì–æ—Ä–æ–¥ *</label>
    <input type="text" id="city" required value="–Ø–∫—É—Ç—Å–∫">

    <label for="payment">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã *</label>
    <select id="payment" required>
      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–±</option>
      <option value="–Ω–∞–ª–∏—á–Ω—ã–º–∏">–ù–∞–ª–∏—á–Ω—ã–º–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</option>
      <option value="–ø–µ—Ä–µ–≤–æ–¥">–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É</option>
    </select>

    <label for="delivery">–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
    <select id="delivery" required>
      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–±</option>
      <option value="–∫—É—Ä—å–µ—Ä">–ö—É—Ä—å–µ—Ä—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</option>
      <option value="—Å–∞–º–æ–≤—ã–≤–æ–∑">–°–∞–º–æ–≤—ã–≤–æ–∑</option>
    </select>

    <label for="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
    <textarea id="comment" placeholder="–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è, –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Ç.–¥."></textarea>

    <div class="loading" id="loading">
      <div class="loading-spinner"></div>
      <p>–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞...</p>
    </div>

    <button type="submit" id="submit-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </form>
</section>

<script>
  // –í–∞—à ID –≤ Telegram (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π —Ä–µ–∞–ª—å–Ω—ã–π ID –∏–ª–∏ username)
const TELEGRAM_BOT_TOKEN = '8505187955:AAFAQpSiQ7nodKJ0ILwo0A3PJLM4llUqV4Y';
const TELEGRAM_CHAT_ID = '6478016631';

  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä–∑–∏–Ω—ã
  function loadOrderSummary() {
    const cart = JSON.parse(localStorage.getItem('cart')) || {};
    const summaryDiv = document.getElementById('order-summary');
    
    if (Object.keys(cart).length === 0) {
      summaryDiv.innerHTML = '<p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞. <a href="catalog.html">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ç–æ–≤–∞—Ä–∞–º</a></p>';
      document.getElementById('submit-btn').disabled = true;
      return;
    }

    let total = 0;
    let itemsHTML = '';
    
    Object.values(cart).forEach(item => {
      const itemTotal = item.price * item.quantity;
      total += itemTotal;
      
      itemsHTML += `
        <div class="order-item">
          <div>
            <strong>${item.name}</strong><br>
            <small>–†–∞–∑–º–µ—Ä: ${item.size || '–ù–µ —É–∫–∞–∑–∞–Ω'}</small>
          </div>
          <div>
            ${item.quantity} √ó ${item.price.toLocaleString()} ‚ÇΩ = <strong>${itemTotal.toLocaleString()} ‚ÇΩ</strong>
          </div>
        </div>
      `;
    });

    summaryDiv.innerHTML = `
      <h3 style="margin-top: 0;">–í–∞—à –∑–∞–∫–∞–∑</h3>
      ${itemsHTML}
      <div class="order-total">
        <span>–ò—Ç–æ–≥–æ:</span>
        <span>${total.toLocaleString()} ‚ÇΩ</span>
      </div>
      <div style="font-size: 0.9em; color: #666; margin-top: 10px;">
        ${Object.keys(cart).length} —Ç–æ–≤–∞—Ä(–æ–≤)
      </div>
    `;
  }

  // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞ –≤ Telegram
  async function sendOrderToTelegram(orderData) {
    // –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    const message = `
üõí *–ù–û–í–´–ô –ó–ê–ö–ê–ó DROP SHOP*

*üë§ –ö–ª–∏–µ–Ω—Ç:* ${orderData.name}
*üìû –¢–µ–ª–µ—Ñ–æ–Ω:* ${orderData.phone}
*üìß Email:* ${orderData.email || '–ù–µ —É–∫–∞–∑–∞–Ω'}
*üìç –ê–¥—Ä–µ—Å:* ${orderData.address}, ${orderData.city}

*üí≥ –û–ø–ª–∞—Ç–∞:* ${orderData.payment}
*üöö –î–æ—Å—Ç–∞–≤–∫–∞:* ${orderData.delivery}
*üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:* ${orderData.comment || '–ù–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è'}

*üìã –°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞:*
${orderData.items.map((item, index) => 
  `${index + 1}. ${item.name}
   –†–∞–∑–º–µ—Ä: ${item.size}
   –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${item.quantity} √ó ${item.price} ‚ÇΩ = ${item.total} ‚ÇΩ`
).join('\n\n')}

*üí∞ –ò—Ç–æ–≥–æ:* ${orderData.total} ‚ÇΩ
*üì¶ –¢–æ–≤–∞—Ä–æ–≤:* ${orderData.items.length} —à—Ç.

*üïê –î–∞—Ç–∞:* ${new Date().toLocaleString('ru-RU')}
*üÜî ID –∑–∞–∫–∞–∑–∞:* #${Date.now().toString().slice(-6)}
    `;

    try {
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ Telegram API
      const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          chat_id: TELEGRAM_CHAT_ID,
          text: message,
          parse_mode: 'Markdown'
        })
      });

      const data = await response.json();
      
      if (data.ok) {
        console.log('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram:', data);
        return true;
      } else {
        console.error('–û—à–∏–±–∫–∞ Telegram API:', data);
        throw new Error(data.description || '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏');
      }
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ Telegram:', error);
      
      // –ü–æ–ø—Ä–æ–±—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
      return await sendViaProxy(orderData, message);
    }
  }

  // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ (–µ—Å–ª–∏ –ø—Ä—è–º–æ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
  async function sendViaProxy(orderData, message) {
    try {
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º JSONPlaceholder –∫–∞–∫ –ø—Ä–∏–º–µ—Ä –ø—Ä–æ–∫—Å–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä)
      const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          to: TELEGRAM_CHAT_ID,
          message: message,
          order: orderData
        })
      });
      
      const data = await response.json();
      console.log('–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏:', data);
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–∫–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
      saveOrderLocally(orderData);
      
      return true;
    } catch (proxyError) {
      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏:', proxyError);
      return false;
    }
  }

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–∫–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ
  function saveOrderLocally(orderData) {
    const orders = JSON.parse(localStorage.getItem('orders')) || [];
    const orderWithId = {
      ...orderData,
      id: Date.now().toString().slice(-6),
      date: new Date().toISOString(),
      status: '–Ω–æ–≤—ã–π'
    };
    orders.push(orderWithId);
    localStorage.setItem('orders', JSON.stringify(orders));
    
    // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–∫–∞–∑ –≤ –∫–æ–Ω—Å–æ–ª–∏
    console.log('–ó–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ:', orderWithId);
    
    return orderWithId.id;
  }

  // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞
  async function submitOrder(event) {
    event.preventDefault();
    
    const name = document.getElementById('name').value.trim();
    const address = document.getElementById('address').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const email = document.getElementById('email').value.trim();
    const city = document.getElementById('city').value.trim();
    const payment = document.getElementById('payment').value;
    const delivery = document.getElementById('delivery').value;
    const comment = document.getElementById('comment').value.trim();

    const errorDiv = document.getElementById('error-message');
    const successDiv = document.getElementById('success-message');
    const loadingDiv = document.getElementById('loading');
    const submitBtn = document.getElementById('submit-btn');

    // –°–∫—Ä—ã—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    errorDiv.textContent = '';
    errorDiv.style.display = 'none';
    successDiv.style.display = 'none';

    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    if (!name || !address || !phone || !payment || !delivery || !city) {
      errorDiv.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (–ø–æ–º–µ—á–µ–Ω—ã *).';
      errorDiv.style.display = 'block';
      return false;
    }

    const phonePattern = /^\+?\d{10,15}$/;
    if (!phonePattern.test(phone)) {
      errorDiv.textContent = '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –ü—Ä–∏–º–µ—Ä: +79161234567';
      errorDiv.style.display = 'block';
      return false;
    }

    if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      errorDiv.textContent = '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –∞–¥—Ä–µ—Å.';
      errorDiv.style.display = 'block';
      return false;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
    const cart = JSON.parse(localStorage.getItem('cart')) || {};
    if (Object.keys(cart).length === 0) {
      errorDiv.textContent = '–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.';
      errorDiv.style.display = 'block';
      return false;
    }

    // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞
    const items = Object.values(cart).map(item => ({
      name: item.name,
      size: item.size || '–ù–µ —É–∫–∞–∑–∞–Ω',
      quantity: item.quantity,
      price: item.price,
      total: item.price * item.quantity
    }));

    const total = items.reduce((sum, item) => sum + item.total, 0);
    const orderId = Date.now().toString().slice(-6);

    const orderData = {
      name,
      phone,
      email: email || '–ù–µ —É–∫–∞–∑–∞–Ω',
      address,
      city,
      payment,
      delivery,
      comment: comment || '–ù–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è',
      items,
      total: total.toLocaleString(),
      date: new Date().toLocaleString('ru-RU'),
      id: orderId
    };

    // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
    loadingDiv.style.display = 'block';
    submitBtn.disabled = true;
    submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';

    try {
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–∫–∞–∑ –≤ Telegram
      const telegramSent = await sendOrderToTelegram(orderData);
      
      if (telegramSent) {
        // –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
        localStorage.removeItem('cart');
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–∫–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ
        saveOrderLocally(orderData);
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        loadingDiv.style.display = 'none';
        successDiv.style.display = 'block';
        successDiv.innerHTML = `
          ‚úÖ <strong>–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω!</strong><br><br>
          
          <strong>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ:</strong><br>
          üë§ –ò–º—è: ${name}<br>
          üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}<br>
          üìç –ê–¥—Ä–µ—Å: ${address}, ${city}<br>
          üí≥ –û–ø–ª–∞—Ç–∞: ${payment}<br>
          üöö –î–æ—Å—Ç–∞–≤–∫–∞: ${delivery}<br>
          üí∞ –°—É–º–º–∞: ${total.toLocaleString()} ‚ÇΩ<br>
          üÜî ID –∑–∞–∫–∞–∑–∞: #${orderId}<br><br>
          
          ‚úÖ <strong>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–∞–º –≤ Telegram!</strong><br>
          –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç.
        `;
        
        // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
        document.getElementById('order-form').reset();
        
        // –û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–¥–∫—É –∑–∞–∫–∞–∑–∞
        setTimeout(() => {
          loadOrderSummary();
        }, 1000);
        
        // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 8 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
          window.location.href = 'index.html';
        }, 8000);
        
      } else {
        throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑');
      }
      
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞:', error);
      loadingDiv.style.display = 'none';
      
      // –í—Å–µ —Ä–∞–≤–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–∫–∞–∑
      const savedId = saveOrderLocally(orderData);
      localStorage.removeItem('cart');
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞
      successDiv.style.display = 'block';
      successDiv.innerHTML = `
        ‚ö†Ô∏è <strong>–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω, –Ω–æ –≤–æ–∑–Ω–∏–∫–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ Telegram.</strong><br><br>
        
        <strong>–í–∞—à –∑–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω —Å ID: #${savedId}</strong><br>
        üë§ –ò–º—è: ${name}<br>
        üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}<br>
        üìç –ê–¥—Ä–µ—Å: ${address}, ${city}<br>
        üí∞ –°—É–º–º–∞: ${total.toLocaleString()} ‚ÇΩ<br><br>
        
        –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ç–µ–ª–µ—Ñ–æ–Ω—É –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –º–∏–Ω—É—Ç.<br>
        –ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è –∑–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞.
      `;
      
      // –û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–¥–∫—É –∑–∞–∫–∞–∑–∞
      setTimeout(() => {
        loadOrderSummary();
      }, 1000);
      
      // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 10000);
    }

    return false;
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  document.addEventListener('DOMContentLoaded', function() {
    loadOrderSummary();
    
    // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Ñ–æ—Ä–º—ã
    const form = document.getElementById('order-form');
    form.addEventListener('submit', submitOrder);
    
    // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    const phoneInput = document.getElementById('phone');
    phoneInput.addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.startsWith('7') || value.startsWith('8')) {
        value = '+7' + value.substring(1);
      } else if (value.length > 0 && !value.startsWith('+')) {
        value = '+' + value;
      }
      e.target.value = value.substring(0, 16);
    });
    
    // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏: –≤—ã–≤–æ–¥–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã –≤ –∫–æ–Ω—Å–æ–ª—å
    const orders = JSON.parse(localStorage.getItem('orders')) || [];
    if (orders.length > 0) {
      console.log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã:', orders);
    }
  });
</script>
</section>

<footer style="text-align: center; padding: 20px; color: #666; font-size: 12px; margin-top: 40px;">
  <a href="admin.html" style="color: inherit; text-decoration: none;">üîí –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É</a>
</footer>

<script>
// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π JavaScript ...
</body>
</html>	